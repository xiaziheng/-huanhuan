<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>窗口样式</title>
    <link href="./libs/bootstrap-3.3.7.css" rel="stylesheet">
    <link href="./libs/font-awesome.css" rel="stylesheet">
    <link href="./libs/editor.css" rel="stylesheet">
    <script src="./libs/jquery-1.12.4.js"></script>
    <script src="./libs/bootstrap-3.3.7.js"></script>
    <script src="./libs/jquery.hotkeys.js"></script>
    <script src="./libs/bootstrap-wysiwyg.js"></script>
    <style>
        #editor{
            max-height: 250px;
            height: 250px;
            background-color: white;
            border-collapse: separate;
            border: 1px solid rgb(204, 204, 204);
            padding: 4px;
            box-sizing: content-box;
            -webkit-box-shadow: rgba(0, 0, 0, 0.0745098) 0 1px 1px 0 inset;
            box-shadow: rgba(0, 0, 0, 0.0745098) 0 1px 1px 0 inset;
            border-top-right-radius: 3px; border-bottom-right-radius: 3px;
            border-bottom-left-radius: 3px; border-top-left-radius: 3px;
            overflow: scroll;
            outline: none;
        }
        #editor:focus{
            border-color:rgba(82, 168, 236, 0.8);
            outline:0;
            outline:thin dotted \9;
            -webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(82,168,236,.6);
            -moz-box-shadow:inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(82,168,236,.6);
            box-shadow:inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(82,168,236,.6);
        }

        div[data-role="editor-toolbar"] {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        .dropdown-menu a {
            cursor: pointer;
        }
        .btn-toolbar {
            padding: 10px 0px 10px 0px;
        }

        [contentEditable=true]:empty:not(:focus):before {
            content:attr(data-placeholder)
        }

        .imgUpload
        {
            width: 0;
            height: 0;
            position:absolute
        }
        .fs-One {  font-size: x-small;  }
        .fs-Three {  font-size: medium;  }
        .fs-Five {  font-size: x-large;  }
    </style>
</head>
<body>
<div class="container">
    <h1>设置简单文本</h1>
    <div class="btn-toolbar" data-role="editor-toolbar"
         data-target="#editor">
        <div class="btn-group">
            <a class="btn btn-default dropdown-toggle" data-toggle="dropdown" title="字体大小"><i class="fa fa-text-height"></i>&nbsp;<b class="caret"></b></a>
            <ul class="dropdown-menu">
                <li><a data-edit="fontSize 5" class="fs-Five">大字体</a></li>
                <li><a data-edit="fontSize 3" class="fs-Three">中号字体</a></li>
                <li><a data-edit="fontSize 1" class="fs-One">小号字体</a></li>
            </ul>
        </div>
        <div class="btn-group">
            <a class="btn btn-default" data-edit="bold" title="加粗 (Ctrl/Cmd+B)"><i class="fa fa-bold"></i></a>
            <a class="btn btn-default" data-edit="italic" title="斜体 (Ctrl/Cmd+I)"><i class="fa fa-italic"></i></a>
            <a class="btn btn-default" data-edit="strikethrough" title="中划线"><i class="fa fa-strikethrough"></i></a>
            <a class="btn btn-default" data-edit="underline" title="下划线 (Ctrl/Cmd+U)"><i class="fa fa-underline"></i></a>
        </div>
        <div class="btn-group">
            <a class="btn btn-default" data-edit="insertunorderedlist" title="普通列表"><i class="fa fa-list-ul"></i></a>
            <a class="btn btn-default" data-edit="insertorderedlist" title="数字列表"><i class="fa fa-list-ol"></i></a>
            <a class="btn btn-default" data-edit="outdent" title="减少缩进 (Shift+Tab)"><i class="fa fa-outdent"></i></a>
            <a class="btn btn-default" data-edit="indent" title="缩进 (Tab)"><i class="fa fa-indent"></i></a>
        </div>
        <div class="btn-group">
            <a class="btn btn-default" data-edit="justifyleft" title="靠左 (Ctrl/Cmd+L)"><i class="fa fa-align-left"></i></a>
            <a class="btn btn-default" data-edit="justifycenter" title="居中 (Ctrl/Cmd+E)"><i class="fa fa-align-center"></i></a>
            <a class="btn btn-default" data-edit="justifyright" title="靠右 (Ctrl/Cmd+R)"><i class="fa fa-align-right"></i></a>
            <a class="btn btn-default" data-edit="justifyfull" title="分散 (Ctrl/Cmd+J)"><i class="fa fa-align-justify"></i></a>
        </div>
        <div class="btn-group">
            <a class="btn btn-default dropdown-toggle" data-toggle="dropdown" title="设置超链接"><i class="fa fa-link"></i></a>
            <div class="dropdown-menu input-append">
                <input placeholder="URL" type="text" data-edit="createLink" />
                <button class="btn" type="button">确定</button>
            </div>
        </div>
        <div class="btn-group">
            <a class="btn btn-default" data-edit="unlink" title="清除超链接"><i class="fa fa-unlink"></i></a>
					<span class="btn btn-default" title="插入图片 (可拖拽图片)" id="pictureBtn"> <i class="fa fa-picture-o"></i>
						<input class="imgUpload" type="file" data-role="magic-overlay" data-target="#pictureBtn" data-edit="insertImage" />
					</span>
        </div>
        <div class="btn-group">
            <a class="btn btn-default" data-edit="undo" title="撤销 (Ctrl/Cmd+Z)"><i class="fa fa-undo"></i></a>
            <a class="btn btn-default" data-edit="redo" title="重做 (Ctrl/Cmd+Y)"><i class="fa fa-repeat"></i></a>
            <a class="btn btn-default" data-edit="html" title="查看代码"><i class='glyphicon glyphicon-pencil'></i></a>
        </div>
    </div>
    <div id="editor" class="lead" data-placeholder="请在这里输入文本并设置格式...."></div>
    <div id="editorPreview"></div>
    <p style="text-align: center;">
        <a class="btn btn-large btn-default jumbo" onClick="btnOK();">确 定</a>
    </p>
</div>

<script type='text/javascript'>

    //TODO 子恒 找个新的自由文本，并测试对应关系
    $(document).ready(function()
    {
        $('#editor').wysiwyg();

        $(".dropdown-menu > input").click(function (e) {
            e.stopPropagation();
        });

        var vGrid = parent.grid.find(".c-content");
        $('#editor').html(vGrid.html());
    });

    function btnOK()
    {
        var ccc = parent.getGrids().find(".c-content");
        ccc.html($('#editor').cleanHtml());
        parent.modalWin.modal("hide");
    }
</script>
</body>
</html>